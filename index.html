<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Arquitetura T√©cnica e Fluxo Sist√™mico - Centralar</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');

    :root{
      /* Grid sizing (est√°vel) */
      --col-left: 160px;
      --col-min: 220px;
      --col-ideal: 18vw;
      --col-max: 300px;

      /* Density */
      --cell-pad-y: 0.65rem;
      --cell-pad-x: 0.65rem;
      --cell-gap: 0.45rem;
      --cell-minh: 132px;

      /* Nodes */
      --node-radius: 0.55rem;
      --node-pad-y: 0.6rem;
      --node-pad-x: 0.85rem;

      /* Visual */
      --shadow-soft: 0 10px 25px -10px rgba(0,0,0,.18);
    }

    body{
      font-family: 'Inter', sans-serif;
      background-color: #f5f5f4;
      color: #1c1917;
      -webkit-font-smoothing: antialiased;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(5px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in { animation: fadeIn 0.25s ease-out forwards; }

    /* Clamp texto */
    .clamp-3{
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    /* =========================
       MATRIZ: sem scroll + fit (ZOOM)
       ========================= */
    .matrix-wrapper{
      overflow:hidden;                 /* sem scrollbar */
      border-radius: 0.85rem;
      background:#fff;
      border:1px solid #e7e5e4;
      box-shadow: var(--shadow-soft);
      position:relative;
      width:100%;
      height:auto;                     /* altura controlada via JS */
      min-height:0;
    }

    /* ESCALA via zoom (mais n√≠tido que transform) */
    .matrix-scale{
      transform: none;                 /* evita blur */
      width: max-content;
      height: max-content;
    }

    .matrix-grid{
      display:grid;
      grid-template-columns:
        var(--col-left)
        repeat(5, clamp(var(--col-min), var(--col-ideal), var(--col-max)));
      grid-template-rows:auto repeat(4, auto);
      min-width: calc(var(--col-left) + 5 * var(--col-min));
      align-content:start;
    }

    .m-header{
      background-color:#fafaf9;
      padding:0.6rem 0.75rem;
      font-size:0.82rem;
      font-weight:900;
      color:#57534e;
      text-transform:uppercase;
      letter-spacing:0.06em;
      text-align:center;
      border-bottom:2px solid #e7e5e4;
      border-right:1px solid #f5f5f4;
      display:flex;
      align-items:center;
      justify-content:center;
      line-height:1.1;
      user-select:none;
    }

    .m-row-header{
      background-color:#fff;
      padding:0.75rem;
      border-bottom:1px solid #f5f5f4;
      border-right:2px solid #e7e5e4;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      gap:0.15rem;
      line-height:1.15;
      user-select:none;
    }

    .m-cell{
      padding: var(--cell-pad-y) var(--cell-pad-x);
      border-bottom:1px solid #f5f5f4;
      border-right:1px solid #f5f5f4;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      gap: var(--cell-gap);
      min-height: var(--cell-minh);
    }

    .bg-focus-col{ background-color:#fffaf5; }

    .node-current{
      background-color:#f5f5f4;
      border:1px solid #d6d3d1;
      color:#44403c;
      padding: var(--node-pad-y) var(--node-pad-x);
      border-radius: var(--node-radius);
      font-size:0.82rem;
      font-weight:800;
      text-align:center;
      width:min(320px, 100%);
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.03);
      line-height:1.15;
    }

    .node-alert, .node-info{
      width:min(340px, 100%);
      padding: var(--node-pad-y) var(--node-pad-x);
      border-radius: var(--node-radius);
      text-align:center;
      line-height:1.15;
    }

    .node-solution{
      border-radius: var(--node-radius);
      padding:0.95rem;
      background:#fff;
      border-left-width:6px;
      display:flex;
      flex-direction:column;
      gap:0.45rem;
      width:min(360px, 100%);
      box-shadow: 0 10px 16px -10px rgba(0,0,0,0.18);
      transition: transform 0.18s ease;
    }
    .node-solution:hover { transform: translateY(-2px); }

    .phase-tag{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      height:26px;
      padding:0 10px;
      border-radius:999px;
      font-size:0.70rem;
      font-weight:900;
      text-transform:uppercase;
      letter-spacing:.04em;
      white-space:nowrap;
    }

    .arrow-down{
      color:#a8a29e;
      font-weight:900;
      text-align:center;
      font-size:1.2rem;
      margin:-0.2rem 0;
      line-height:1;
      user-select:none;
    }

    /* Modos por escala */
    body.mode-compact{
      --cell-minh: 118px;
      --cell-pad-y: 0.55rem;
      --cell-pad-x: 0.55rem;
      --cell-gap: 0.38rem;
    }
    body.mode-compact .m-header{ padding:0.5rem 0.55rem; font-size:0.76rem; }
    body.mode-compact .node-solution{ padding:0.78rem; }
    body.mode-compact .node-current{ font-size:0.78rem; }
    body.mode-compact .arrow-down{ font-size:1.1rem; }

    body.mode-ultra{
      --cell-minh: 110px;
      --cell-pad-y: 0.48rem;
      --cell-pad-x: 0.48rem;
    }
    body.mode-ultra .node-solution h4{ font-size:0.95rem !important; }
    body.mode-ultra .node-current{ font-size:0.74rem; }
    body.mode-ultra .m-header{ font-size:0.72rem; }

    /* Shell */
    .page-shell{
      width:100%;
      max-width:1600px;
      margin:0 auto;
      padding-left:1rem;
      padding-right:1rem;
    }
    @media (min-width:768px){
      .page-shell{ padding-left:1.5rem; padding-right:1.5rem; }
    }

    /* ===== Detalhamento (layout antigo) ===== */
    .details-shell .info-card{
      transition: transform 0.18s ease, box-shadow 0.18s ease;
    }
    .details-shell .info-card:hover{
      transform: translateY(-2px);
      box-shadow: 0 12px 22px -12px rgba(0,0,0,0.18);
    }
    .details-shell .feature-list li{
      position:relative;
      padding-left:1.15rem;
      margin-bottom:0.45rem;
    }
    .details-shell .feature-list li::before{
      content:'‚Üí';
      position:absolute;
      left:0;
      top:0;
      font-weight:900;
    }

    /* =========================
       DETALHAMENTO - COMPACTO
       (reduz a escrita sem alterar o resto do layout)
       ========================= */
    .details-compact .info-card .bg-blue-600,
    .details-compact .info-card .bg-emerald-600,
    .details-compact .info-card .bg-amber-500,
    .details-compact .info-card .bg-purple-600{
      padding: 1.25rem !important; /* era p-8 */
    }

    .details-compact .info-card > div.p-8{
      padding: 1.25rem !important; /* corpo: era p-8 */
    }

    .details-compact h2{
      font-size: 1.05rem !important;
      line-height: 1.2 !important;
    }

    .details-compact p.text-stone-500{
      font-size: 0.80rem !important;
    }

    .details-compact .info-card h3{
      font-size: 1.45rem !important; /* era 3xl */
      line-height: 1.15 !important;
    }

    .details-compact .info-card p.text-lg{
      font-size: 0.95rem !important;
      line-height: 1.45 !important;
      margin-bottom: 1.0rem !important; /* era mb-8 */
    }

    .details-compact .info-card .border-t{
      padding-top: 1rem !important; /* era pt-6 */
    }

    .details-compact .info-card span.block.text-sm{
      font-size: 0.72rem !important;
      margin-bottom: 0.6rem !important;
      letter-spacing: 0.06em !important;
    }

    .details-compact .feature-list{
      font-size: 0.88rem !important;
      line-height: 1.4 !important;
    }

    .details-compact .feature-list li{
      margin-bottom: 0.45rem !important;
    }

    .details-compact .feature-list.space-y-4 > * + *{
      margin-top: 0.5rem !important; /* era space-y-4 */
    }

    .details-compact .info-card .text-sm.font-bold{
      font-size: 0.72rem !important;
      padding: 0.35rem 0.65rem !important;
    }

    .details-compact .info-card .text-sm.uppercase{
      font-size: 0.70rem !important;
    }

    /* Print */
    @page{ size: A4 landscape; margin: 10mm; }
    @media print{
      body{ background:#fff !important; color:#000 !important; }
      header{ position: static !important; box-shadow:none !important; border:none !important; }
      .no-print{ display:none !important; }

      .matrix-wrapper{
        box-shadow:none !important;
        border:1px solid #ddd !important;
        overflow:visible !important;
        height:auto !important;
      }
      .node-solution, .node-current, .info-card{ box-shadow:none !important; }
      .node-solution:hover{ transform:none !important; }

      .matrix-scale{ zoom: 1 !important; }
      .matrix-grid{ zoom: 0.90; min-width: 0 !important; }

      .details-compact .info-card .bg-blue-600,
      .details-compact .info-card .bg-emerald-600,
      .details-compact .info-card .bg-amber-500,
      .details-compact .info-card .bg-purple-600{
        padding: 0.9rem !important;
      }
      .details-compact .info-card > div.p-8{
        padding: 0.9rem !important;
      }
    }
  </style>
</head>

<body class="min-h-screen flex flex-col">

  <!-- Header (layout antigo) -->
  <header class="bg-white border-b border-stone-200 shadow-sm sticky top-0 z-50">
    <div class="page-shell py-3 flex flex-col md:flex-row items-start md:items-center justify-between gap-3">
      <div class="flex flex-col md:flex-row md:items-center gap-3 md:gap-6">
        <div class="flex items-center select-none">
          <span class="text-3xl font-black text-stone-900 tracking-tighter leading-none">UX</span>
          <span class="text-[0.65rem] font-bold text-stone-500 tracking-[0.25em] ml-1.5 mt-2 leading-none">GROUP</span>
        </div>

        <div class="hidden md:block h-8 w-px bg-stone-300"></div>

        <div>
          <h1 class="text-xl lg:text-2xl font-extrabold text-stone-900 tracking-tight leading-tight">
            Arquitetura de Solu√ß√µes Log√≠sticas
          </h1>
          <p class="text-stone-500 text-xs lg:text-sm mt-0.5 font-semibold uppercase tracking-wide">
            Integra√ß√£o Sist√™mica do Ciclo de Pedido TMS
          </p>
        </div>
      </div>

      <div class="flex items-center gap-2 flex-wrap">
        <div class="flex items-center gap-2 bg-stone-50 px-4 py-2 rounded border border-stone-200 shadow-inner">
          <span class="w-2.5 h-2.5 rounded-full bg-red-500 animate-pulse"></span>
          <span class="text-xs lg:text-sm font-black text-stone-700">Foco: Gest√£o e Tracking do Redespacho</span>
        </div>

        <button
          class="no-print px-3 py-2 rounded border border-stone-200 bg-white hover:bg-stone-50 text-xs font-extrabold text-stone-700"
          onclick="toggleFullScreen()"
          title="Tela cheia"
        >‚õ∂ Tela cheia</button>

        <button
          class="no-print px-3 py-2 rounded border border-stone-200 bg-white hover:bg-stone-50 text-xs font-extrabold text-stone-700"
          onclick="resetScale()"
          title="Recalcular ajuste"
        >‚ü≥ Ajustar</button>

        <button
          class="no-print px-3 py-2 rounded border border-stone-200 bg-white hover:bg-stone-50 text-xs font-extrabold text-stone-700"
          onclick="window.print()"
          title="Imprimir"
        >üñ®Ô∏è Imprimir</button>
      </div>
    </div>
  </header>

  <main class="flex-grow page-shell py-4 flex flex-col gap-5">

    <!-- Context Alert (texto revisado) -->
    <div class="bg-blue-50 border-l-8 border-blue-500 p-4 rounded-r-xl shadow-sm flex items-center gap-4">
      <span class="text-3xl">üéØ</span>
      <div>
        <p class="text-blue-900 text-sm lg:text-base leading-snug font-medium">
          <strong class="font-extrabold">Alinhamento T√©cnico:</strong>
          O <strong class="text-purple-700">Trux (TMS)</strong> concentra a <strong>execu√ß√£o operacional</strong> (roteiriza√ß√£o, embarques, romaneios e documentos fiscais aplic√°veis).
          O <strong class="text-blue-700">Ondetah</strong> atua como <strong>torre de visibilidade</strong>, consolidando tracking conforme disponibilidade de integra√ß√£o dos transportadores.
          O <strong class="text-emerald-700">Fusion</strong> garante <strong>previsibilidade de custo e SLA</strong> na simula√ß√£o do checkout.
        </p>
      </div>
    </div>

    <!-- MATRIZ (layout antigo) -->
    <section class="matrix-wrapper animate-fade-in" id="matrixWrapper">
      <div class="matrix-scale" id="matrixScale">
        <div class="matrix-grid" id="matrixGrid">

          <!-- Headers -->
          <div class="m-header bg-stone-100 border-b-2 border-r-2 border-stone-200">Sistemas ‚Üì | Etapas ‚Üí</div>
          <div class="m-header text-sm lg:text-[0.95rem]">1. Simula√ß√£o &amp; Venda</div>
          <div class="m-header text-sm lg:text-[0.95rem]">2. Faturamento / WMS</div>
          <div class="m-header border-b-4 border-b-purple-500 text-sm lg:text-[0.95rem]">3. TMS: Execu√ß√£o &amp; Doca</div>
          <div class="m-header border-b-4 border-b-blue-500 bg-focus-col text-blue-900 text-sm lg:text-[0.95rem]">4. Tr√¢nsito &amp; Redespacho</div>
          <div class="m-header text-sm lg:text-[0.95rem]">5. P√≥s-Entrega &amp; Auditoria</div>

          <!-- Row 1 -->
          <div class="m-row-header">
            <span class="text-[0.70rem] font-bold text-stone-400 uppercase tracking-widest">Camada Front</span>
            <span class="text-base md:text-lg font-extrabold text-stone-800">Site / E-com</span>
          </div>

          <div class="m-cell">
            <div class="node-current">Cota√ß√£o Padr√£o (sem intelig√™ncia log√≠stica)</div>
            <div class="arrow-down">‚Üì</div>

            <div class="node-solution border-emerald-500">
              <div class="flex items-center justify-between">
                <span class="phase-tag bg-emerald-500 text-white">Fase 2</span>
              </div>
              <h4 class="text-lg font-extrabold text-emerald-900 leading-tight">Fusion (API)</h4>
              <p class="text-[0.85rem] font-semibold text-emerald-800 leading-snug clamp-3">
                Simula custo e SLA da malha (incluindo cen√°rios de redespacho, quando parametrizado). N√£o executa a opera√ß√£o.
              </p>
            </div>
          </div>

          <div class="m-cell"></div>
          <div class="m-cell"></div>

          <div class="m-cell bg-focus-col">
            <div class="node-current">Painel do Cliente</div>
            <div class="arrow-down">‚Üì</div>
            <div class="bg-blue-100 border-2 border-blue-200 node-info">
              <span class="text-base font-extrabold text-blue-800 block mb-1">Status / Linha do Tempo</span>
              <span class="text-[0.70rem] font-black text-blue-700 uppercase tracking-wider bg-blue-200 px-2 py-1 rounded">
                Atualiza√ß√£o via API/Webhook (quando dispon√≠vel)
              </span>
            </div>
          </div>

          <div class="m-cell"></div>

          <!-- Row 2 -->
          <div class="m-row-header">
            <span class="text-[0.70rem] font-bold text-stone-400 uppercase tracking-widest">Camada Core</span>
            <span class="text-base md:text-lg font-extrabold text-stone-800">ERP &amp; WMS</span>
          </div>

          <div class="m-cell"></div>

          <div class="m-cell">
            <div class="node-current">Pedido Criado no ERP</div>
            <div class="arrow-down">‚Üì</div>
            <div class="node-current bg-stone-200 border-stone-300">Emiss√£o de NF</div>
            <div class="arrow-down">‚Üì</div>
            <div class="node-current">Picking no WMS</div>
          </div>

          <div class="m-cell"></div>
          <div class="m-cell bg-focus-col"></div>
          <div class="m-cell"></div>

          <!-- Row 3 -->
          <div class="m-row-header">
            <span class="text-[0.70rem] font-bold text-purple-400 uppercase tracking-widest">Operacional</span>
            <span class="text-base md:text-lg font-extrabold text-purple-800">TMS (Interno)</span>
          </div>

          <div class="m-cell"></div>
          <div class="m-cell"></div>

          <div class="m-cell bg-purple-50/50">
            <div class="node-current">Sele√ß√£o de Transportadora (manual ou automatizada)</div>
            <div class="arrow-down">‚Üì</div>

            <div class="node-solution border-purple-500">
              <div class="flex items-center justify-between">
                <span class="phase-tag bg-purple-600 text-white">Fase 4 (Core)</span>
              </div>
              <h4 class="text-lg font-extrabold text-purple-900 leading-tight">Trux TMS</h4>
              <ul class="text-[0.85rem] text-purple-800 font-extrabold space-y-2 mt-1">
                <li class="flex items-start gap-2"><span>‚úî</span> Orquestra√ß√£o operacional (roteiriza√ß√£o / despacho)</li>
                <li class="flex items-start gap-2"><span>‚úî</span> Defini√ß√£o de transportadora e hub</li>
                <li class="flex items-start gap-2 bg-purple-100 p-2 rounded-lg text-purple-900 border border-purple-200">
                  <span>‚úî</span> Emiss√£o de romaneio &amp; documentos fiscais aplic√°veis
                </li>
              </ul>
            </div>
          </div>

          <div class="m-cell bg-focus-col"></div>

          <div class="m-cell">
            <div class="node-current">Libera√ß√£o Pagto. Frete</div>
            <div class="arrow-down">‚Üì</div>

            <div class="node-solution border-amber-500">
              <div class="flex items-center justify-between">
                <span class="phase-tag bg-amber-500 text-white">Fase 3</span>
              </div>
              <h4 class="text-lg font-extrabold text-amber-900 leading-tight">Concilia√ß√£o</h4>
              <p class="text-[0.85rem] font-semibold text-amber-800 leading-snug clamp-3">
                Audita diverg√™ncias entre custo simulado/contratado e custo faturado, refor√ßando controle de margem log√≠stica.
              </p>
            </div>
          </div>

          <!-- Row 4 -->
          <div class="m-row-header !border-b-0">
            <span class="text-[0.70rem] font-bold text-blue-400 uppercase tracking-widest">Externa</span>
            <span class="text-base md:text-lg font-extrabold text-blue-800">Transporte</span>
          </div>

          <div class="m-cell !border-b-0"></div>
          <div class="m-cell !border-b-0"></div>
          <div class="m-cell !border-b-0"></div>

          <div class="m-cell bg-focus-col !border-b-0">
            <div class="bg-red-50 border-2 border-dashed border-red-300 text-red-800 node-alert">
              <span class="font-extrabold text-[0.85rem] block mb-1">Execu√ß√£o F√≠sica (A ‚Üí B ‚Üí C)</span>
              <span class="bg-red-200 text-red-900 text-[0.70rem] font-black px-2 py-0.5 rounded uppercase">
                Risco de visibilidade no redespacho
              </span>
            </div>

            <div class="arrow-down !text-blue-400">‚Üì</div>

            <div class="node-solution border-blue-500 border-l-8 z-10 border-2">
              <div class="flex items-center justify-between">
                <span class="phase-tag bg-blue-600 text-white">Fase 1 (Visibilidade)</span>
              </div>
              <h4 class="text-lg font-extrabold text-blue-900 leading-tight">Ondetah</h4>
              <p class="text-[0.85rem] font-extrabold text-blue-800 leading-snug clamp-3">
                Consolida tracking ponta a ponta conforme disponibilidade de integra√ß√£o e qualidade de eventos dos transportadores.
              </p>
            </div>
          </div>

          <div class="m-cell !border-b-0"></div>

        </div>
      </div>
    </section>

    <!-- DETALHAMENTO (mesmo layout, mais compacto) -->
    <section class="details-shell details-compact pb-10">
      <div class="flex items-end justify-between gap-3 mt-2">
        <div>
          <h2 class="font-black text-stone-900 tracking-tight">Detalhamento T√©cnico dos Produtos</h2>
          <p class="text-stone-500 font-semibold">Resumo objetivo dos componentes (Fase 1 a 4).</p>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8 pt-4">

        <!-- Ondetah -->
        <div class="info-card bg-white rounded-2xl border border-stone-200 overflow-hidden flex flex-col shadow-lg">
          <div class="bg-blue-600 p-8">
            <div class="flex justify-between items-center mb-3">
              <span class="text-sm uppercase text-blue-200 font-bold tracking-widest">Tracking do Redespacho</span>
              <span class="text-white bg-blue-500 px-4 py-1.5 rounded text-sm font-bold">Fase 1</span>
            </div>
            <h3 class="text-3xl font-black text-white">1. Ondetah</h3>
          </div>
          <div class="p-8 flex-grow flex flex-col bg-stone-50">
            <p class="text-lg font-semibold text-stone-800 mb-8 leading-relaxed">
              Centraliza a visibilidade do redespacho, integrando-se via API/EDI (conforme disponibilidade e homologa√ß√£o dos transportadores)
              para consolidar rastreios e ocorr√™ncias em uma vis√£o √∫nica da jornada da carga.
            </p>
            <div class="mt-auto border-t border-stone-200 pt-6">
              <span class="block text-sm font-bold text-stone-400 uppercase mb-4">Funcionalidades Core:</span>
              <ul class="text-base text-stone-700 font-medium feature-list space-y-4">
                <li class="text-blue-700">Consolida√ß√£o de m√∫ltiplos rastreios em uma linha do tempo √∫nica, quando houver eventos dispon√≠veis.</li>
                <li class="text-blue-700">Padroniza√ß√£o de ocorr√™ncias conforme mapeamento por transportador.</li>
                <li class="text-blue-700">Monitoramento de SLA e gest√£o de exce√ß√µes operacionais.</li>
                <li class="text-blue-700">Integra√ß√£o via API/Webhook para atualiza√ß√£o de status em ERP e e-commerce, quando aplic√°vel.</li>
                <li class="text-blue-700">Torre de controle com vis√£o centralizada da jornada log√≠stica.</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Fusion -->
        <div class="info-card bg-white rounded-2xl border border-stone-200 overflow-hidden flex flex-col shadow-lg">
          <div class="bg-emerald-600 p-8">
            <div class="flex justify-between items-center mb-3">
              <span class="text-sm uppercase text-emerald-200 font-bold tracking-widest">Prote√ß√£o de Margem</span>
              <span class="text-white bg-emerald-500 px-4 py-1.5 rounded text-sm font-bold">Fase 2</span>
            </div>
            <h3 class="text-3xl font-black text-white">2. Fusion</h3>
          </div>
          <div class="p-8 flex-grow flex flex-col bg-stone-50">
            <p class="text-lg font-semibold text-stone-800 mb-8 leading-relaxed">
              Motor de cota√ß√£o e regras log√≠sticas que garante previsibilidade de custo e coer√™ncia operacional,
              evitando diverg√™ncias entre o frete ofertado ao cliente e o modelo real de execu√ß√£o (direto ou redespacho, quando parametrizado).
              N√£o executa a opera√ß√£o ‚Äî apenas simula e orienta a decis√£o log√≠stica.
            </p>
            <div class="mt-auto border-t border-stone-200 pt-6">
              <span class="block text-sm font-bold text-stone-400 uppercase mb-4">Funcionalidades Core:</span>
              <ul class="text-base text-stone-700 font-medium feature-list space-y-4">
                <li class="text-emerald-700">Simula√ß√£o comparativa entre rotas diretas e rotas com consolida√ß√£o/redespacho.</li>
                <li class="text-emerald-700">C√°lculo de prazo (SLA) considerando regras e parametriza√ß√µes operacionais.</li>
                <li class="text-emerald-700">Gest√£o de tabelas de frete (cubagem, faixas, adicionais e exce√ß√µes).</li>
                <li class="text-emerald-700">Parametriza√ß√£o de regras comerciais e operacionais por transportador.</li>
                <li class="text-emerald-700">Performance adequada para uso em checkout (SLA validado em ambiente do projeto).</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Concilia√ß√£o -->
        <div class="info-card bg-white rounded-2xl border border-stone-200 overflow-hidden flex flex-col shadow-lg">
          <div class="bg-amber-500 p-8">
            <div class="flex justify-between items-center mb-3">
              <span class="text-sm uppercase text-amber-100 font-bold tracking-widest">Auditoria Financeira</span>
              <span class="text-white bg-amber-400 px-4 py-1.5 rounded text-sm font-bold">Fase 3</span>
            </div>
            <h3 class="text-3xl font-black text-white">3. Concilia√ß√£o</h3>
          </div>
          <div class="p-8 flex-grow flex flex-col bg-stone-50">
            <p class="text-lg font-semibold text-stone-800 mb-8 leading-relaxed">
              M√≥dulo de auditoria financeira do frete, reduzindo vazamento de caixa por diverg√™ncias entre o custo simulado/contratado e o custo faturado,
              habilitando contesta√ß√£o, aprova√ß√£o e controle de margem log√≠stica.
            </p>
            <div class="mt-auto border-t border-stone-200 pt-6">
              <span class="block text-sm font-bold text-stone-400 uppercase mb-4">Funcionalidades Core:</span>
              <ul class="text-base text-stone-700 font-medium feature-list space-y-4">
                <li class="text-amber-700">Importa√ß√£o de documentos fiscais e financeiros (XML/planilhas) via ERP, transportador ou upload controlado, conforme modelo do cliente.</li>
                <li class="text-amber-700">Cruzamento entre custo simulado/contratado versus custo faturado (CTe/DOCCOB).</li>
                <li class="text-amber-700">Identifica√ß√£o de diverg√™ncias como taxas n√£o acordadas, diferen√ßas de cubagem e adicionais.</li>
                <li class="text-amber-700">Gera√ß√£o de relat√≥rios de diverg√™ncia e base estruturada para contesta√ß√£o ou aprova√ß√£o financeira.</li>
                <li class="text-amber-700">Integra√ß√£o com ERP para apoio ao processo de pagamento.</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Trux -->
        <div class="info-card bg-white rounded-2xl border border-stone-200 overflow-hidden flex flex-col border-b-8 border-b-purple-500 shadow-lg">
          <div class="bg-purple-600 p-8">
            <div class="flex justify-between items-center mb-3">
              <span class="text-sm uppercase text-purple-200 font-bold tracking-widest">Governan√ßa Operacional</span>
              <span class="text-white bg-purple-500 px-4 py-1.5 rounded text-sm font-bold">Fase 4</span>
            </div>
            <h3 class="text-3xl font-black text-white">4. Trux TMS</h3>
          </div>
          <div class="p-8 flex-grow flex flex-col bg-stone-50">
            <p class="text-lg font-semibold text-stone-800 mb-8 leading-relaxed">
              TMS voltado √† execu√ß√£o e governan√ßa operacional e fiscal do transporte, centralizando despacho, gest√£o de viagens e documentos conforme as regras previamente definidas.
              Respons√°vel pela execu√ß√£o real da opera√ß√£o definida (roteiriza√ß√£o, despacho e emiss√£o fiscal aplic√°vel).
            </p>
            <div class="mt-auto border-t border-stone-200 pt-6">
              <span class="block text-sm font-bold text-stone-400 uppercase mb-4">Funcionalidades Core:</span>
              <ul class="text-base text-stone-700 font-medium feature-list space-y-4">
                <li class="text-purple-700">Gest√£o de viagens, embarques, ocorr√™ncias e status operacionais.</li>
                <li class="text-purple-700">Gera√ß√£o de romaneios e documentos operacionais.</li>
                <li class="text-purple-700">Emiss√£o e gest√£o fiscal (ex.: CTe e documentos aplic√°veis, conforme escopo do projeto).</li>
                <li class="text-purple-700">Parametriza√ß√£o de hubs e regras de redespacho.</li>
                <li class="text-purple-700">
                  Aplicativo do motorista com:
                  <ul class="ml-5 mt-2 space-y-1.5 list-disc text-[0.95rem] opacity-90 font-normal">
                    <li>Disponibilidade de carga</li>
                    <li>Visualiza√ß√£o de valor de frete e impostos</li>
                    <li>Rastreamento em tempo real (condicionado ao uso do aplicativo)</li>
                    <li>Informa√ß√µes financeiras vinculadas √† viagem</li>
                  </ul>
                </li>
                <li class="text-purple-700">Execu√ß√£o alinhada √†s regras e decis√µes definidas no Fusion, quando integrados.</li>
              </ul>
            </div>
          </div>
        </div>

      </div>
    </section>

  </main>

  <script>
    // Fit-to-screen usando ZOOM (mais n√≠tido que transform)
    function fitMatrixToScreen(){
      const wrapper = document.getElementById('matrixWrapper');
      const scaleEl = document.getElementById('matrixScale');
      const grid = document.getElementById('matrixGrid');
      if (!wrapper || !scaleEl || !grid) return;

      scaleEl.style.zoom = '';
      scaleEl.style.transform = 'none';

      const rect = wrapper.getBoundingClientRect();
      const viewportW = document.documentElement.clientWidth;
      const viewportH = window.innerHeight;

      const paddingBottom = 16;

      const availableW = viewportW - rect.left;
      const availableH = viewportH - rect.top - paddingBottom;

      const contentW = grid.scrollWidth;
      const contentH = grid.scrollHeight;

      let scale = Math.min(1, availableW / contentW, availableH / contentH);
      scale = Math.floor(scale * 100) / 100;

      document.body.classList.toggle('mode-compact', scale < 0.85);
      document.body.classList.toggle('mode-ultra', scale < 0.75);

      requestAnimationFrame(() => {
        const newW = grid.scrollWidth;
        const newH = grid.scrollHeight;

        let newScale = Math.min(1, availableW / newW, availableH / newH);
        newScale = Math.floor(newScale * 100) / 100;

        const supportsZoom = typeof scaleEl.style.zoom !== 'undefined';

        if (supportsZoom) {
          scaleEl.style.zoom = String(newScale);
          scaleEl.style.transform = 'none';
        } else {
          scaleEl.style.zoom = '';
          scaleEl.style.transform = `scale(${newScale})`;
          scaleEl.style.transformOrigin = 'top left';
        }

        wrapper.style.height = Math.ceil(newH * newScale) + 'px';
      });
    }

    function resetScale(){
      requestAnimationFrame(fitMatrixToScreen);
    }

    function toggleFullScreen(){
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen?.();
      } else {
        document.exitFullscreen?.();
      }
      setTimeout(() => fitMatrixToScreen(), 250);
    }

    // Evita efeito "zoom inverso" (n√£o briga com zoom do navegador)
    let lastDevicePixelRatio = window.devicePixelRatio;

    window.addEventListener('resize', () => {
      const zoomChanged = window.devicePixelRatio !== lastDevicePixelRatio;
      lastDevicePixelRatio = window.devicePixelRatio;

      if (zoomChanged) return;
      fitMatrixToScreen();
    });

    window.addEventListener('DOMContentLoaded', () => {
      fitMatrixToScreen();
    });
  </script>
</body>
</html>
